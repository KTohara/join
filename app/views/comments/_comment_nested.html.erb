<% nesting = local_assigns.fetch(:nesting, 1) %>
<% max_nesting = local_assigns[:max_nesting] %>

<div>
  <div>
    <i class="far fa-thumbs-up"></i>
  </div>
  <%= render 'comments/form',
    commentable: comment.commentable,
    comment: comment,
    parent_id: find_parent_comment_id(comment, nesting, max_nesting),
    target: 'reply.form'
  %>
  <div>
    <i class="far fa-pen-to-square"></i>
  </div>
  <%= button_to [comment.commentable, comment], method: :delete do %>
    <i class="far fa-trash-can"></i>
  <% end %>
</div>
<hr>
<%= render comment.comments,
  nesting: nesting + 1,
  max_nesting: max_nesting
%>